#!/bin/bash
GHCDIR=/usr/lib/ghc
GHCVER=ghc-7.6.1
CABALDIR=~/.cabal
ROOTDIR=$(dirname $0)/..

ghc -hide-package mtl ./CellMLMarshal.hs
g++ -I$GHCDIR/include ./test.cpp ./cellml-testbed-bindings.cpp CellMLMarshal.o -Wl,--no-whole-archive $ROOTDIR/cellml12/dist/build/libHScellml12-*.a $ROOTDIR/cmathml3/dist/build/libHScmathml3-*.a $ROOTDIR/arrowapply-utils/dist/build/libHSarrowapply-utils-*.a $CABALDIR/lib/hxt-9.3.1.1/$GHCVER/libHShxt-*.a $CABALDIR/lib/hxt-charproperties-9.1.1/$GHCVER/libHShxt-charproperties-*.a $CABALDIR/lib/hxt-unicode-9.0.2/$GHCVER/libHShxt-*.a $CABALDIR/lib/parsec-3.1.3/$GHCVER/libHSparsec-*.a $CABALDIR/lib/mtl-2.1.2/$GHCVER/libHSmtl-*.a $CABALDIR/lib/uniplate-1.6.7/$GHCVER/libHSuniplate-*.a $CABALDIR/lib/unordered-containers-0.2.2.1/$GHCVER/libHSunordered-containers-*.a $CABALDIR/lib/hashable-1.1.2.5/$GHCVER/libHShashable-*.a $CABALDIR/lib/syb-0.3.7/$GHCVER/libHSsyb*.a $CABALDIR/lib/monadio-unwrappable-0.3/$GHCVER/libHSmonadio-unwrappable-*.a $CABALDIR/lib/curl-1.3.7/$GHCVER/libHScurl-*.a $CABALDIR/lib/cereal-0.3.5.2/$GHCVER/libHScereal-*.a $CABALDIR/lib/monads-tf-0.1.0.1/$GHCVER/libHSmonads-tf-*.a $CABALDIR/lib/temporary-1.1.2.4/$GHCVER/libHStemporary-*.a $CABALDIR/lib/network-2.4.0.1/$GHCVER/libHSnetwork-*.a $GHCDIR/process-*/libHSprocess-*.a $GHCDIR/directory-*/libHSdirectory-*.a $GHCDIR/filepath-*/libHSfilepath-*.a $CABALDIR/lib/transformers-0.3.0.0/$GHCVER/libHStransformers-*.a $GHCDIR/unix-*/libHSunix-*.a $GHCDIR/binary-*/libHSbinary-*.a $GHCDIR/containers-*/libHScontainers-*.a $GHCDIR/bytestring-*/libHSbytestring-*.a $GHCDIR/deepseq-*/libHSdeepseq-*.a $GHCDIR/array-*/libHSarray-*.a $GHCDIR/libHSrts_thr.a $GHCDIR/base-4.*/libHSbase-4.*.a $GHCDIR/integer-gmp-0.*/libHSinteger-gmp-0.*.a $GHCDIR/ghc-prim-0.*/libHSghc-prim-0.*.a -lffi -lgmp -ldl -lpthread -lrt -lcurl -o test
